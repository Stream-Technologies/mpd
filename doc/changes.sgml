<!-- $Id: changes.sgml,v 1.25 2003/11/26 15:00:26 archiecobbs Exp $ -->
<!-- mpd netgraph enabled user mode PPP daemon -->

<!-- <!DOCTYPE linuxdoc PUBLIC '-//FreeBSD//DTD linuxdoc//EN'> -->

  <sect><heading>Change history<label id="changes"></heading>

  <p>
    Changes since version 3.15:
    <itemize>
    <item>Added <tt>set bundle max-logins <em>num</em></tt> option at bundle level
	for limiting the max. amount of concurrent logins with the same username.
	Original idea submitted by Andrey V. Elsukov <tt><htmlurl
	url='mailto:bu7cher@land.ru' name='&lt;bu7cher@land.ru&gt;'></tt>.
    </item>
    <item>Mpd has now its own link-stats with 64 bit counters. This
	is a workaround for the 32 bit limitation of ng_ppp_link_stat.
    </item>
    <item>RADIUS enhancements:
    <itemize>
    	<item>Set the RAD_ACCT_INPUT_GIGAWORDS and RAD_ACCT_OUTPUT_GIGAWORDS 
		attributes when sending accounting requests.</item>
    	<item>Use the RAD_ACCT_INTERIM_INTERVAL attribute.</item>
    </itemize>
    </item>
    <item>Implemented PPPoE server functionality
    </item>
    <item>Added ability to configure ipfw firewall for clients using
	vendor specific RADIUS attributes. Submitted by Alexander Motin
    <tt><htmlurl url='mailto:mav@alkar.net' name='&lt;mav@alkar.net&gt;'></tt>.
    </item>
    <item>Added the possibility of choosing link by it's number (same as RAD_NAS_PORT) instead of name
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.14:
    <itemize>
    <item>Implemented a workaround for weird crashes when using RADIUS and PAP.
    Thanx to Alexey Popov for helping debugging this problem.
    </item>
    <item>Added the possibility of sending periodic RADIUS Accounting updates.
    Submitted by Vitaliy Akimov
    <tt><htmlurl url='mailto:vx@bigline.net' name='&lt;vx@bigline.net&gt;'></tt>.
    </item>
    <item>Fixed usage of RAD_FRAMED_MTU, it is now interpreted as an upper limit and
	not as absolute value.
    </item>
    <item><tt>set iface enable tcpmssfix</tt> option added.
    Submitted by Sergey Korolew
    <tt><htmlurl url='mailto:dsATbittu.org.ru' name='&lt;dsATbittu.org.ru&gt;'></tt>.
    </item>
    <item>
    New command line flag <tt>-a</tt> for specifying the telnet console
    IP address. Original idea submitted by Andrey V. Elsukov
    <tt><htmlurl url='mailto:bu7cher@land.ru' name='&lt;bu7cher@land.ru&gt;'></tt>.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.13:
    <itemize>
    <item>Added session timeout, configurable at iface level.
    </item>
    <item>Added new configuration params: <tt>chap-md5</tt> <tt>chap-msv1</tt>
	<tt>chap-msv2</tt> at link level for explicitly configuring
	the different CHAP methods. The formerly <tt>chap</tt> parameter
	is now an alias for <tt>chap-md5 chap-msv1 chap-msv2</tt>.
	MS-CHAPv1 is now disabled and denied by default. A better fallback
	mechanism through the different auth-methods was implemented.
    </item>
    <item>More RADIUS fixes/features:
    <itemize>
    	<item>Use also the RAD_SESSION_TIMEOUT.</item>
    	<item>Fixed RAD_ACCT_TERMINATE_CAUSE.</item>
    	<item>Fixed MPPE-Types negotiation.</item>
    	<item>Session time is now calculated per link.</item>
    	<item>Use RAD_FRAMED_ROUTE attribute.</item>
    	<item>When no MPPE-Info's are returned by the server, but
		MPPE-Keys are, then implicitely allow encryption with
		all types (workaround for Microsoft IAS).</item>
    </itemize>
    </item>
    <item>Reset link statistics when the link goes down</item>
    <item><tt>set iface radius-route</tt> option added.
    Submitted by Alexander Motin
    <tt><htmlurl url='mailto:mav@alkar.net' name='&lt;mav@alkar.net&gt;'></tt>.
    </item>
    <item>DNS servers added to interface up script.
    Submitted by Josh Elsasser
    <tt><htmlurl url='mailto:jre@vineyard.net' name='&lt;jre@vineyard.net&gt;'></tt>.
    </item>
    <item>Fix bug in multi-session PPPoE support caused by incorrect
	application of the original patch. Submitted by OGAWA Takaya
    <tt><htmlurl url='mailto:t-ogawa@triaez.kaisei.org' name='&lt;t-ogawa@triaez.kaisei.org&gt;'></tt>.
    </item>
    <item>Fix problem where IP address assignment from <tt>mpd.secrets</tt>
	would linger and affect subsequent connections on the same bundle.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.12:
    <itemize>
    <item>Support for PPPoE node re-use added. Patch submitted by
    Gleb Smirnoff
    <tt><htmlurl url='mailto:glebius@cell.sick.ru' name='&lt;glebius@cell.sick.ru&gt;'></tt>.
    See also FreeBSD PR
    <tt><htmlurl url='http://www.freebsd.org/cgi/query-pr.cgi?pr=48138' name='&lt;ports/48138&gt;'></tt>.
    </item>
    <item>Multi-session PPPoE support added. Patch submitted by
    Hideyuki Nishiyama
    <tt><htmlurl url='mailto:hnishi@mx5.harmonix.ne.jp' name='&lt;hnishi@mx5.harmonix.ne.jp&gt;'></tt>
    </item>
    <item>More RADIUS fixes from Michael Bretterklieber
    <tt><htmlurl url='mailto:mbretter@jawa.at' name='&lt;mbretter@jawa.at&gt;'></tt>
    </item>
    <item>After configuring the IP address, add a route to the
    local IP address via <tt>lo0</tt>. This prevents packets destined
    for the local machine from needlessly travelling across the link
    and back. Patch submitted by Fabio Vilan
    <tt><htmlurl url='mailto:fabio@isec.com.br' name='&lt;fabio@isec.com.br&gt;'></tt>
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.11:
    <itemize>
    <item>Fixed bug in client-side MPPE key generation.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.10:
    <itemize>
    <item>Support for authentication and IP address assignment via
    RADIUS was added. Thanks to Michael Bretterklieber
    <tt><htmlurl url='mailto:mbretter@jawa.at' name='&lt;mbretter@jawa.at&gt;'></tt>
    for submitting the patches.
    </item>
    <item>Support for finding passwords using an external authentication
	script was added.  Thanks to Gregory Bond
    <tt><htmlurl url='mailto:gnb@itga.com.au' name='&lt;gnb@itga.com.au&gt;'></tt>
    for submitting the patches.
    </item>
    <item>Fixed build failure when MICROSOFT_CHAP is not enabled.
    </item>
    <item>Enabled support for DES encryption by default in the build.
    </item>
    <item>Fixed bug where LCP echo reply packets were being sent
    with garbled payload contents.
    </item>
    <item>Fixed bug with <tt>set iface mtu</tt> where an inadvertent
    <tt>set iface up-script</tt> command would also be invoked.
    </item>
    <item>Removed LCP_MRU_MARGIN hack which should no longer be needed.
    Note: you may need to explicitly use <tt>set iface mtu</tt> and/or
    <tt>set link mtu</tt> to get the previous MTU behavior for your
    configuration.
    </item>
    <item>Fixed bug where outgoing PPTP requests were not being initiated
    with the configured local source IP address. Note: using multiple PPTP
    IP addresses at the same time for incoming connections still does not
    work properly; workaround: use multiple MPD processes.
    </item>
    <item>Log the MTU being used each time an interface is configured.
    </item>
    <item>New command added: <tt>set udp origination</tt>.
    </item>
    <item>Link with libcrypto instead of the obsolete libdes.
    </item>
    <item>Added new command bundle option <tt>noretry</tt>.
    </item>
    <item>Install the PostScript version of the documentation as well.
    </item>
    <item>Bumped the max length for an up or down script to 128 (from 32).
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.9:
    <itemize>
    <item>Fixed more bugs when computing the interface MTU
    </item>
    <item>Added the <tt>set iface mtu</tt> command.
    </item>
    <item>Added troubleshooting chapter to the documentation.
    </item>
    <item>Peer authname is appended as an extra parameter to the
    interface up and down scripts.
    </item>
    <item>Fixed broken links to IETR RFC's in the references chapter
    of the documentation.
    </item>
    <item>Fixed bugs that only showed up on non-i386 hardware
    (mostly alignment bugs).
    </item>
    <item>Added new GCC -W flags and fixed lots of GCC warnings.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.8:
    <itemize>
    <item>Added the <tt>set link mtu</tt> command.
    </item>
    <item>Fixed typo in description of <tt>set bundle period</tt> command.
    </item>
    <item>Fixed incorrect description of <tt>set ng hook</tt> command.
    </item>
    <item>Updated HTML links to on-line Netgraph documents.
    </item>
    <item>Added HTML link to Microsoft update for Windows 95/98.
    </item>
    <item>When displaying bundles and links, show the links LCP state as well.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.7:
    <itemize>
    <item>Now setting <tt>max-redial</tt> to -1 means mpd will never redial.
	This is useful for dial-in servers.
    </item>
    <item>Increased the default <tt>FD_SETSIZE</tt> to 2048 so we can
	handle lots of bundles, and made it compile-time adjustable.
    </item>
    <item>Allow multiple PPTP connections from the same IP address
	when this is OK to do (no explicit peer IP addresses configured).
	This allows multiple incoming connections through a remote NAT device.
    </item>
    <item>Added support for 56-bit MPPE encryption.
    </item>
    <item>Allow the inner and outer PPTP IP addresses to be the same,
	relying on the kernel to return an error if it needs to.
	This reverts the change put into version 3.3.
    </item>
    <item>Fixed bug in MTU calculation when doing MPPC/MPPE.
    </item>
    <item>Added the <tt>set pptp phonenum <em>number</em></tt> command.
    </item>
    <item>Added documentation for the <tt>delayed-ack</tt>
	and <tt>always-ack</tt> PPTP device configuration options.
    </item>
    <item>Minor tweaks to the sample config files.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.6:
    <itemize>
    <item>Fix a bug where the MPPE keys were being incorrectly generated
	when MS-CHAP was used to authenticate in both directions.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.5:
    <itemize>
    <item>Fix MS-CHAPv2 acknowledge reply to workaround Win9x bug when
	trying to negotiate MPPE encryption.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.4:
    <itemize>
    <item>Fix an install problem on FreeBSD-current.
    </item>
    <item>Display the peer's authname and EID in ``show bundle'' command.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.3:
    <itemize>
    <item>Support for MS-CHAPv2 when we are the server.
	Always request MS-CHAPv2 first, then accept MS-CHAPv1
	if the peer requests that instead.
    </item>
    <item>Fix for possible core dump in ECP code.
    </item>
    <item>Fix for bug in event library when an invalid file
	descriptor is passed.
    </item>
    <item>Disallow allow PPTP peer inside and outside IP addresses
	from being the same; we know this won't work.
    </item>
    <item>Fixed bug in PAP code where the PAP response packet would
	be improperly formatted.
    <item>Accept EINPROGRESS error from ng_ksocket connect message.
	This happens on FreeBSD-current for some reason.
    </item>
    <item>Accept PPTP messages with non-zero values in reserved
	fields. They violate the specification but some peers
	send them anyway.
    </item>
    <item>Remove bogus extra field in definition of PPTP StopCtrlConnReply.
    </item>
    </itemize>
  </p>

  <p>
    Changes since version 3.2:
    <itemize>
    <item>There is no longer a fixed limit to the number of
	bundles and/or links that may be created.
    </item>
    <item>Better random number generation using <tt>srandomdev(4)</tt>.
    </item>
    <item>Miscellaneous minor bug fixes.
    </item>
    <item>
	Support for authenticating to the peer using Microsoft CHAP Version 2
	has been added.
    <bf>Note:</bf>
	When authenticating the peer, only Version 1 is requested.
    </item>
    <item>Hostnames are allowed in the configuration files.
    </item>
    </itemize>

  The latter two are thanks to Franco Venturi
    <tt><htmlurl url='mailto:fventuri@mediaone.net'
	  name='&lt;fventuri@mediaone.net&gt;'></tt>
  </p>

